<ion-header id="header-object-list">
    <ion-navbar color="header-element">
        <ion-title>
            {{ pageTitle }}
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content  class="page_object_list" >
    <ion-refresher
        (ionRefresh)="executeSync()"
        [closeDuration]="400"
        [pullMin]="150"
    >
        <ion-refresher-content id="refresher-content"
                               pullingIcon="arrow-down"
                               pullingText="{{ 'sync.pull_to_sync' | translate:[] }}"
                               refreshingText="{{ footerToolbar.loadingText }}"
                               text-center>
        </ion-refresher-content>
    </ion-refresher>

    <!-- status : synchronization in progress -->
    <ion-grid *ngIf="footerToolbar.isLoading && !refresherIsPulled()">
        <ion-row>
            <ion-col>
                <ion-spinner class="centered"></ion-spinner>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-label text-center>{{footerToolbar.loadingText}}</ion-label>
            </ion-col>
        </ion-row>
    </ion-grid>

    <!-- status : display object-list, synchronization complete -->
    <ion-list  class="ilias-object-list" *ngIf="deviceOnline && !footerToolbar.isLoading">
        <div class="" *ngIf="parent != undefined">
            <ion-item  no-lines *ngIf="parent.hasPageLayout" text-wrap="" (click)="openPageLayout()">
                <ion-avatar item-start>
                    <img [src]="pageLayout.icon"><!-- TODO make relative? -->
                </ion-avatar>
                <span>{{pageLayout.text | translate: []}}</span>
            </ion-item>

            <ion-item no-lines  *ngIf="parent.hasTimeline" text-wrap="" (click)="openTimeline()">
                <ion-icon [name]=timeline.icon item-start></ion-icon>
                <span>{{timeline.text | translate: []}}</span>
            </ion-item>
        </div>
        <ion-item-group>

            <ion-item text-wrap class="bottom-line list-element" *ngFor="let object of objects" (click)="onClick(object)" color="list-element">

                <ion-avatar item-start>
                    <img [src]="object.presenter.icon()"><!-- TODO make relative? -->
                    <ion-badge *ngIf="object.isLinked()" color="nobg-w" class="badge-link">
                        <img [src]="theme.getAsset('icon/obj_link.svg')" class="badge-logo">
                    </ion-badge>
                </ion-avatar>

                <span *ngIf="object.presenter.showTypeAsText()">{{ object.presenter.typeLangVar() | translate:[] }}:</span>
                {{ object.presenter.title() }} <span *ngIf="!object.presenter.title()">{{ 'no_title' | translate:[] }}</span>
                <p class="object-flags">
                    <ion-badge color="light" *ngIf="object.isFavorite">
                        <ion-icon color="primary" name="ai-favorites"></ion-icon>
                    </ion-badge>
                </p>
                <button class="ilias-list-action-button" ion-button round color="light" item-right (click)="showActions(object)">
                    <ion-icon name="more" color="primary"></ion-icon>
                </button>
            </ion-item>

            <ion-item text-wrap="" *ngIf="!objects.length && !footerToolbar.isLoading">
                {{ 'no_items' | translate:[] }}
            </ion-item>
        </ion-item-group>
    </ion-list>

    <!-- status : user offline -->
    <ion-grid *ngIf="!deviceOnline">
        <ion-row>
            <ion-col>
                <ion-label>YOU ARE OFFLINE PULL DOWN TO RETRY OR GOTO FAVORITES</ion-label>
                <button ion-button (click)="switchToFavouritesTab()">FAVORITES</button>
            </ion-col>
        </ion-row>
    </ion-grid>

</ion-content>

<!-- <ion-footer >
  <ion-toolbar>
    <ion-buttons left>
      <button ion-button>
        <ion-spinner [paused]="!footerToolbar.isLoading" *ngIf="footerToolbar.isLoading"></ion-spinner>
      </button>
    </ion-buttons>
    <div *ngIf="footerToolbar.isLoading">{{ footerToolbar.loadingText }}</div>
    <div *ngIf="!footerToolbar.isLoading">{{ 'sync.last_sync' | translate:[] }}: {{ sync.lastSyncString }}</div>
  </ion-toolbar>
</ion-footer> -->
